/*
	CREATE TABLE
    INSERT INTO TABLE
    DELETE FROM TABLE
    UPDATE TABLE

    ALTER TABLE
		ADD COLUMN
        DROP COLUMN
        MODIFY COLUMN
	DROP TABLE
    
	NOT NULL
	DEFAULT

    CONSTRAINT : ADDITIONAL CHECKS/CONDITIONS on the columns
        UNIQUE
        CHECK
        
	WHERE
		 OPERATORS AND OR BETWEEN
    ORDER BY
		ASC, DESC
	GROUP BY
    SUB QUERIES
    
    JOINS

*/

/*


INDEX

NOT NULL
UNIQUE

FULL TABLE SCAN - WHEN NO INDEX

PRIMARY KEY - NOT NULL, UNIQUE, INDEX

STATE						PARENT_TABLE
	STATE_CD 	PRIMARY KEY
    STATE_NAME
COLLEGE						CHILD_TABLE
	COLLEGE_CD	PRIMARY KEY 
    COLLEGE_NAME 
    STATE_CD	FOREIGN KEY

STATE_CD ENTERED IN COLLEGE TABLE ONLY IF IT IS AVAILABLE IN STATE 
WE CANT DELETE A STATE_CD FROM STATE IF CHILD RECORD EXISTS IN COLLEGE

*/
DROP TABLE COLLEGE;
DROP TABLE STATE;
CREATE TABLE STATE 
(
	STATE_CD VARCHAR(8) PRIMARY KEY,
    STATE_NAME VARCHAR(50) NOT NULL
);

CREATE TABLE COLLEGE
(
	COLLEGE_CD VARCHAR(20) PRIMARY KEY,
    COLLEGE_NAME VARCHAR(100),
    STATE_CD VARCHAR(8),
    CONSTRAINT COLLEGE_STATE_FK FOREIGN KEY (STATE_CD) 
    REFERENCES STATE(STATE_CD)
);

INSERT INTO STATE VALUES ('KARK','KARNATAKA');
INSERT INTO STATE VALUES ('AP','ANDHRA PRADESH');
INSERT INTO STATE VALUES ('TL','TELANGANA');
INSERT INTO STATE VALUES ('CHN','CHENNAI');


INSERT INTO COLLEGE VALUES ('XYZ','XYZ ENGG COLLEGE', 'KARK');
INSERT INTO COLLEGE VALUES ('SV','SRI VENKY ENGG COLLEGE', 'TL');
INSERT INTO COLLEGE VALUES ('CMR','CHANDRA MOHAN REDDY ENGG COLLEGE', 'TL');
INSERT INTO COLLEGE VALUES ('DECCAN','DECCAN ENGG COLLEGE', 'TL');
INSERT INTO COLLEGE VALUES ('SRI','SRI VIDYA ENGG COLLEGE', 'AP');
INSERT INTO COLLEGE VALUES ('BVC','BUCHCHI VENKATA CHAITANAYA ENGG COLLEGE', 'AP');
INSERT INTO COLLEGE VALUES ('GIT','GITAM ENGG COLLEGE', 'AP');



/*

DELETE FROM COLLEGE WHERE STATE_CD = 'KAR';
DELETE FROM STATE WHERE STATE_CD = 'KAR';

*/


UPDATE COLLEGE SET STATE_CD = 'KAR' WHERE STATE_CD = 'KARK'; -- THIS WILL NOT WORK
UPDATE STATE SET STATE_CD = 'KAR' WHERE STATE_CD = 'KARK'; -- THIS WILL NOT WORK

/*
INSERT RECORD IN STATE WITH CORRECT STATE_CD
UPDATE COLLEGE WITH THE NEW STATE_CD INSERTED
DELETE RECORD IN STATE WITH INCORRECT STATE_CD
*/


SELECT * FROM STATE;

SELECT * FROM COLLEGE;

/* 
OLD WAY
*/

SELECT STATE_NAME, COLLEGE_NAME FROM STATE, COLLEGE WHERE STATE.STATE_CD = COLLEGE.STATE_CD;

/*
NEW WAY

*/
SELECT STATE_NAME, COLLEGE_NAME FROM STATE JOIN COLLEGE ON STATE.STATE_CD = COLLEGE.STATE_CD;
/*
JOIN (INNER JOIN)
OUTER JOIN
	LEFT JOIN (LEFT OUTER JOIN)
    RIGHT JOIN (RIGHT OUTER JOIN)
    FULL
*/

SELECT STATE_NAME, COLLEGE_NAME FROM STATE LEFT JOIN COLLEGE ON STATE.STATE_CD = COLLEGE.STATE_CD;


/*
SELECT COL.... FROM TAB1, TAB2, TAB3, TAB4 WHERE JOIN CONDITIONS

SELECT COL... FROM TAB1 INNER JOIN TAB2 ON COL INNER JOIN TAB 3 ON COL INNER JOIN TAB 4 ON COL
*/


CREATE TABLE STUDENT
(
	STUDENT_ID BIGINT PRIMARY KEY,
    STUDENT_NAME VARCHAR(100),
    COLLEGE_CD VARCHAR(20),
    CONSTRAINT STUDENT_COLLEGE_FK FOREIGN KEY (COLLEGE_CD)
    REFERENCES COLLEGE (COLLEGE_CD)
);


INSERT INTO STUDENT VALUES (1001, 'GADHI','DECCAN');
INSERT INTO STUDENT VALUES (1002, 'CHINTU','BVC');
INSERT INTO STUDENT VALUES (1003, 'BABLU', 'GIT');

SELECT * FROM STATE;
SELECT * FROM COLLEGE;
SELECT * FROM STUDENT;

SELECT S.STATE_CD, S.STATE_NAME, C.COLLEGE_CD, C.COLLEGE_NAME, ST.STUDENT_ID, ST.STUDENT_NAME FROM 
STATE S 
LEFT JOIN 
COLLEGE C 
ON S.STATE_CD = C.STATE_CD 
LEFT JOIN 
STUDENT ST 
ON C.COLLEGE_CD = ST.COLLEGE_CD
ORDER BY S.STATE_CD, C.COLLEGE_CD;



 
